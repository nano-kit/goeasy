# API Protocol

Table of Contents

* [Enums](#enums)
    * [Enum UserActivityEvent.Type](#enum-useractivityeventtype)
* [Objects](#objects)
    * [Object Event](#object-event)
    * [Object Message](#object-message)
    * [Object UserActivityEvent](#object-useractivityevent)




## Enums

### enum UserActivityEvent.Type



Constants

|   Value   |   Name    |  Description |
| --------- | --------- | ------------ |
| 0  | UNSPECIFIED |  |
| 1  | ONLINE | go online |
| 2  | OFFLINE | go offline |
| 3  | HEARD | get any uplink message |
| 4  | ENTER_ROOM | enter a room |
| 5  | LEAVE_ROOM | leave a room |


## Objects

### object Event

Event is the asynchronous message using Go-Micro's message broker interface. refer to Comet.onEvent

Attributes

|   Name    |   Type    |  Description |
| --------- | --------- | ------------ |
| uid | string | The unique user identity |
| rid | string | The room identity |
| evt | string | The server-sent event goes through the downlink to the client. |


### object Message

Message is the general content predefined by comet for server-sent event. It is stringified to JSON and then assigned to `string evt`.

Attributes

|   Name    |   Type    |  Description |
| --------- | --------- | ------------ |
| server | string | A optional string identifying the server that generates event. |
| event | string | A string identifying the type of event. |
| data | string | The data field for the message. |
| id | string | The event ID. |
| time | int64 | The time this event happens. It is the number of nanoseconds elapsed since January 1, 1970 UTC. |


### object UserActivityEvent

UserActivityEvent is generated by comet to indicate the user activity.

Attributes

|   Name    |   Type    |  Description |
| --------- | --------- | ------------ |
| type | [enum UserActivityEvent.Type](#enum-useractivityeventtype) | event type |
| uid | string | user identity |
| rid | string | room identity to enter or leave |
| time | int64 | event happens at the number of nanoseconds elapsed since January 1, 1970 UTC |

